<div class="playground-layout">
  <div class="playground-body">

    <div class="editor-column" [ngClass]="{'full-width': !showLogs}">
      <ngx-monaco-editor
        class="monaco-host"
        [options]="editorOptions"
        [(ngModel)]="userCode"
        (onInit)="onEditorInit()"
      ></ngx-monaco-editor>
    </div>

    <div *ngIf="showLogs" class="sidebar-column">
      <div class="sidebar-header">
        <strong>Logs</strong>
      </div>

      <div class="output-container">
        <div *ngFor="let message of output" class="log-line">
          {{ message }}
        </div>
      </div>

      <div *ngIf="result" class="result-container">
        <hr />
        <p>
          <strong>Succeeded: {{ ObjectUtils.boolToYesNo(result.success) }}</strong>
        </p>
        <div *ngIf="result.output" class="result-actions">
          <button class="btn btn-sm btn-outline-info" (click)="showCode()">
            View Full
          </button>
          <pre class="json-preview">{{ result.output | json }}</pre>
        </div>
      </div>
    </div>
  </div>

  <div class="playground-footer">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div>
        <button class="btn btn-info" (click)="onTest()">Test Syntax</button>
        <button class="btn btn-warning ms-1" (click)="onTest(true)">
          Test Execution
        </button>
        <button
          class="ms-1 btn btn-outline-info"
          (click)="showLogs = !showLogs">
          {{ showLogs ? 'Hide Logs' : 'Show Logs' }}
        </button>
      </div>
      <div>
        <button class="btn btn-outline-success" (click)="saveAndClose()">Save</button>
      </div>
    </div>
  </div>
</div>
